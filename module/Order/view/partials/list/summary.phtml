<?php
use DbSystel\DataObject\LogicalConnection;
?>
<?php
/**
 * @var \DbSystel\DataObject\FileTransferRequest $fileTransferRequest
 */
$fileTransferRequest;

if (strcasecmp($connectionType, LogicalConnection::TYPE_CD) === 0) {
    $physicalConnectionEndToEnd = $fileTransferRequest->getLogicalConnection()->getPhysicalConnectionEndToEnd();
    $endpointSource = $physicalConnectionEndToEnd ? $physicalConnectionEndToEnd->getEndpointSource() : null;
    $endpointSourceServer = $endpointSource ? $endpointSource->getServer() : null;
    $endpointSourceServerName = $endpointSourceServer ? $endpointSourceServer->getName() : null;
} elseif (strcasecmp($connectionType, LogicalConnection::TYPE_FTGW) === 0) {
    $physicalConnectionEndToMiddle = $fileTransferRequest->getLogicalConnection()->getPhysicalConnectionEndToMiddle();
    $endpointSource = $physicalConnectionEndToMiddle ? $physicalConnectionEndToMiddle->getEndpointSource() : null;
    $endpointSourceServer = $endpointSource ? $endpointSource->getServer() : null;
    $endpointSourceServerName = $endpointSourceServer ? $endpointSourceServer->getName() : null;
    $physicalConnectionMiddleToEnd = $fileTransferRequest->getLogicalConnection()->getPhysicalConnectionMiddleToEnd();
    $endpointTarget = $physicalConnectionMiddleToEnd ? $physicalConnectionMiddleToEnd->getEndpointTarget() : null;
    $endpointTargetServer = $endpointTarget ? $endpointTarget->getServer() : null;
    $endpointTargetServerName = $endpointTargetServer ? $endpointTargetServer->getName() : null;
}
?>
<ul>
    <li><?php echo $this->translate('application') . ': ' . $fileTransferRequest->getServiceInvoicePositionBasic()->getServiceInvoice()->getApplication()->getTechnicalShortName(); ?></li>
    <li><?php echo $this->translate('environment') . ': ' . $fileTransferRequest->getServiceInvoicePositionBasic()->getServiceInvoice()->getEnvironment()->getName(); ?></li>
    <li>
        <?php echo $this->translate('endpoint') . ' ' . '(' . $this->translate('source') . ')'; ?>
        <ul>
            <li><?php echo $this->translate('server name') . ': ' . $endpointSourceServerName; ?></li>
        </ul>
    </li>
    <li>
        <?php echo $this->translate('endpoint') . ' ' . '(' . $this->translate('target') . ')'; ?>
        <ul>
            <li><?php echo $this->translate('server name') . ': ' . $endpointTargetServerName; ?></li>
        </ul>
    </li>
</ul>
